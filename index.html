<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AEMI GMAO - Presentation v1 | ExplorIA</title>
  <meta name="description" content="Presentation detaillee de l'application AEMI GMAO v1 - Gestion de Maintenance Assistee par Ordinateur pour Forrest Groupe">
  <link rel="icon" href="https://aemi-gmao.vercel.app/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
            mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
            display: ['Space Grotesk', 'Inter', 'sans-serif'],
          },
          colors: {
            neo: {
              yellow: '#FFE600',
              pink: '#FF6B9D',
              blue: '#0066FF',
              green: '#00D68F',
              orange: '#FF8A00',
              purple: '#8B5CF6',
              red: '#FF3B30',
              dark: '#1a1a2e',
              darker: '#0f0f1a',
            }
          },
          boxShadow: {
            'neo': '4px 4px 0px 0px rgba(0,0,0,1)',
            'neo-lg': '6px 6px 0px 0px rgba(0,0,0,1)',
            'neo-xl': '8px 8px 0px 0px rgba(0,0,0,1)',
            'neo-hover': '2px 2px 0px 0px rgba(0,0,0,1)',
            'neo-yellow': '4px 4px 0px 0px #FFE600',
            'neo-blue': '4px 4px 0px 0px #0066FF',
            'neo-pink': '4px 4px 0px 0px #FF6B9D',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* Reading progress bar */
    #progress-bar {
      position: fixed; top: 0; left: 0; height: 4px; z-index: 9999;
      background: linear-gradient(90deg, #FFE600, #FF6B9D, #0066FF, #00D68F);
      transition: width 0.1s ease;
    }

    /* Smooth reveal animations */
    .reveal { opacity: 0; transform: translateY(30px); transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
    .reveal.visible { opacity: 1; transform: translateY(0); }

    /* Sidebar */
    #sidebar { transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
    #sidebar.closed { transform: translateX(-100%); }

    /* Active nav link */
    .nav-link.active {
      background: #FFE600;
      color: #000;
      font-weight: 600;
      border-right: 3px solid #000;
    }

    /* Markdown content styling */
    #content h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.5rem; font-weight: 800; line-height: 1.1;
      margin: 3rem 0 1.5rem; padding-bottom: 1rem;
      border-bottom: 4px solid #000;
      scroll-margin-top: 80px;
    }
    .dark #content h1 { border-bottom-color: #FFE600; color: #FFE600; }

    #content h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.8rem; font-weight: 700; line-height: 1.2;
      margin: 2.5rem 0 1rem; padding: 0.75rem 1rem;
      background: #FFE600; color: #000;
      border: 3px solid #000; box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
      display: inline-block;
      scroll-margin-top: 80px;
    }
    .dark #content h2 { background: #0066FF; color: #fff; border-color: #0066FF; }

    #content h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.4rem; font-weight: 600;
      margin: 2rem 0 0.75rem; padding-left: 1rem;
      border-left: 5px solid #0066FF;
      scroll-margin-top: 80px;
    }
    .dark #content h3 { border-left-color: #FF6B9D; color: #e2e8f0; }

    #content h4 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.15rem; font-weight: 600;
      margin: 1.5rem 0 0.5rem; color: #333;
      scroll-margin-top: 80px;
    }
    .dark #content h4 { color: #a5b4fc; }

    #content p {
      font-size: 1.05rem; line-height: 1.8; margin: 0.75rem 0;
      color: #374151;
    }
    .dark #content p { color: #cbd5e1; }

    #content ul, #content ol {
      margin: 0.75rem 0 0.75rem 1.5rem;
      line-height: 1.8;
    }
    #content li { margin: 0.3rem 0; color: #374151; font-size: 1.05rem; }
    .dark #content li { color: #cbd5e1; }

    #content strong { font-weight: 700; color: #000; }
    .dark #content strong { color: #FFE600; }

    #content em { font-style: italic; color: #6B7280; }
    .dark #content em { color: #94a3b8; }

    #content code {
      font-family: 'JetBrains Mono', monospace;
      background: #f3f4f6; color: #e11d48; padding: 0.15rem 0.4rem;
      border-radius: 4px; font-size: 0.9rem; border: 1px solid #e5e7eb;
    }
    .dark #content code { background: #1e293b; color: #fb923c; border-color: #334155; }

    #content pre {
      background: #1e293b; color: #e2e8f0; padding: 1.5rem;
      border-radius: 8px; overflow-x: auto; margin: 1rem 0;
      border: 2px solid #000; box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
      font-size: 0.9rem;
    }
    #content pre code { background: none; color: inherit; border: none; padding: 0; }

    #content table {
      width: 100%; border-collapse: collapse; margin: 1.5rem 0;
      border: 3px solid #000; box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
      font-size: 0.95rem;
    }
    .dark #content table { border-color: #334155; box-shadow: 4px 4px 0px 0px #1e293b; }

    #content thead { background: #000; color: #FFE600; }
    .dark #content thead { background: #0f172a; color: #FFE600; }

    #content th {
      padding: 0.75rem 1rem; text-align: left; font-weight: 700;
      font-family: 'Space Grotesk', sans-serif; font-size: 0.9rem;
      text-transform: uppercase; letter-spacing: 0.05em;
    }
    #content td {
      padding: 0.65rem 1rem; border-bottom: 1px solid #e5e7eb;
    }
    .dark #content td { border-bottom-color: #1e293b; color: #cbd5e1; }

    #content tbody tr:hover { background: #FFFDE7; }
    .dark #content tbody tr:hover { background: #1e293b; }

    #content blockquote {
      border-left: 5px solid #FFE600; background: #FFFDE7;
      padding: 1rem 1.5rem; margin: 1.5rem 0;
      font-style: italic; color: #555;
    }
    .dark #content blockquote { background: #1e293b; border-left-color: #FF6B9D; color: #94a3b8; }

    #content hr {
      border: none; height: 3px; background: #000; margin: 3rem 0;
    }
    .dark #content hr { background: #334155; }

    #content a { color: #0066FF; text-decoration: underline; font-weight: 500; }
    #content a:hover { color: #FF6B9D; }
    .dark #content a { color: #60a5fa; }

    /* Table of contents hover */
    .toc-link { transition: all 0.15s ease; }
    .toc-link:hover { transform: translateX(4px); }

    /* Floating shapes */
    .shape {
      position: absolute; opacity: 0.08; pointer-events: none;
    }
    .dark .shape { opacity: 0.04; }

    /* Print styles */
    @media print {
      #sidebar, #mobile-toggle, #progress-bar, #back-to-top, .shape, #dark-toggle { display: none !important; }
      #main-content { margin-left: 0 !important; }
      #content h2 { box-shadow: none; }
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #000; border-radius: 4px; }
    .dark ::-webkit-scrollbar-track { background: #0f172a; }
    .dark ::-webkit-scrollbar-thumb { background: #334155; }

    /* Easter egg: Konami code hint */
    #easter-egg {
      display: none; position: fixed; bottom: 20px; right: 20px;
      background: #FFE600; border: 3px solid #000; padding: 1rem;
      box-shadow: 4px 4px 0px 0px rgba(0,0,0,1); z-index: 9999;
      font-family: 'Space Grotesk', sans-serif; font-weight: 700;
      animation: bounce 0.5s ease;
    }
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
  </style>
</head>
<body class="bg-white dark:bg-neo-darker text-gray-900 dark:text-gray-100 font-sans">

  <!-- Progress Bar -->
  <div id="progress-bar" style="width: 0%"></div>

  <!-- Mobile Toggle -->
  <button id="mobile-toggle" onclick="toggleSidebar()" class="fixed top-4 left-4 z-50 lg:hidden bg-neo-yellow border-3 border-black p-2 shadow-neo hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all" style="border-width: 3px;">
    <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M4 6h16M4 12h16M4 18h16"/></svg>
    <svg id="close-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/></svg>
  </button>

  <!-- Dark Mode Toggle -->
  <button id="dark-toggle" onclick="toggleDark()" class="fixed top-4 right-4 z-50 bg-white dark:bg-neo-dark border-3 border-black dark:border-gray-600 p-2 shadow-neo hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all" style="border-width: 3px;" title="Mode sombre">
    <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden dark:block text-neo-yellow" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
    <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
  </button>

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed left-0 top-0 h-full w-72 bg-white dark:bg-neo-dark border-r-4 border-black dark:border-gray-700 z-40 overflow-y-auto closed lg:translate-x-0 lg:block">
    <!-- Header -->
    <div class="p-6 border-b-4 border-black dark:border-gray-700 bg-neo-yellow dark:bg-neo-blue">
      <div class="flex items-center gap-3 mb-2">
        <div class="w-10 h-10 bg-black text-neo-yellow font-display font-black text-lg flex items-center justify-center" style="border-radius: 4px;">A</div>
        <div>
          <h1 class="font-display font-bold text-lg text-black dark:text-white leading-tight">AEMI GMAO</h1>
          <p class="text-xs font-mono font-semibold text-black/60 dark:text-white/60">v1.0 - Fevrier 2026</p>
        </div>
      </div>
      <p class="text-xs mt-2 text-black/70 dark:text-white/70 font-medium">Par <span class="font-bold">ExplorIA</span> pour Forrest Groupe</p>
    </div>

    <!-- Nav Links -->
    <nav id="sidebar-nav" class="p-4 space-y-1">
      <p class="text-xs font-mono font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-3 px-3">Sommaire</p>
      <div id="toc-container" class="space-y-0.5">
        <p class="text-sm text-gray-400 px-3 py-2">Chargement...</p>
      </div>
    </nav>

    <!-- Footer -->
    <div class="absolute bottom-0 left-0 right-0 p-4 border-t-3 border-black dark:border-gray-700 bg-gray-50 dark:bg-neo-darker" style="border-top-width: 3px;">
      <a href="https://aemi-gmao.vercel.app" target="_blank" class="block w-full bg-neo-blue text-white font-display font-bold text-center py-2.5 border-3 border-black shadow-neo hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all text-sm" style="border-width: 3px;">
        Ouvrir l'App AEMI
      </a>
      <p class="text-center text-xs text-gray-400 mt-3 font-mono">52 000+ mots &middot; 100+ pages</p>
    </div>
  </aside>

  <!-- Overlay for mobile sidebar -->
  <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden"></div>

  <!-- Main Content -->
  <main id="main-content" class="lg:ml-72 min-h-screen">
    <!-- Hero -->
    <header class="relative overflow-hidden bg-neo-yellow dark:bg-neo-dark border-b-4 border-black dark:border-gray-700">
      <!-- Decorative shapes -->
      <div class="shape top-10 right-10 w-32 h-32 bg-neo-pink rotate-12" style="border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;"></div>
      <div class="shape bottom-10 left-20 w-24 h-24 bg-neo-blue -rotate-12 rounded-full"></div>
      <div class="shape top-20 left-1/3 w-16 h-16 bg-neo-green rotate-45"></div>

      <div class="relative max-w-4xl mx-auto px-6 py-16 md:py-24">
        <div class="inline-block bg-black text-neo-yellow dark:bg-neo-blue dark:text-white font-mono font-bold text-xs px-3 py-1.5 mb-6 border-2 border-black shadow-neo" style="letter-spacing: 0.1em;">
          DOCUMENT DE PRESENTATION
        </div>
        <h1 class="font-display font-black text-5xl md:text-7xl text-black dark:text-white leading-[0.95] mb-6">
          AEMI<br>
          <span class="text-neo-blue dark:text-neo-yellow">GMAO</span><br>
          <span class="text-3xl md:text-4xl font-bold text-black/60 dark:text-white/60">Version 1.0</span>
        </h1>
        <p class="text-lg md:text-xl text-black/70 dark:text-gray-300 max-w-xl leading-relaxed mb-8">
          Gestion de Maintenance Assistee par Ordinateur pour le suivi des groupes electrogenes au Katanga, RDC.
        </p>
        <div class="flex flex-wrap gap-3">
          <a href="https://aemi-gmao.vercel.app" target="_blank" class="inline-block bg-black dark:bg-neo-blue text-white font-display font-bold px-6 py-3 border-3 border-black shadow-neo-lg hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all" style="border-width: 3px;">
            Voir l'Application &rarr;
          </a>
          <a href="https://github.com/fortbaptiste/aemi-forrestgroupe" target="_blank" class="inline-block bg-white dark:bg-neo-darker text-black dark:text-white font-display font-bold px-6 py-3 border-3 border-black dark:border-gray-600 shadow-neo hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all" style="border-width: 3px;">
            Code Source
          </a>
        </div>

        <!-- Quick stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-12">
          <div class="bg-white dark:bg-neo-darker border-3 border-black dark:border-gray-700 p-4 shadow-neo" style="border-width: 3px;">
            <p class="font-display font-black text-2xl text-neo-blue">17</p>
            <p class="text-xs font-mono text-gray-500 dark:text-gray-400 mt-1">Tables DB</p>
          </div>
          <div class="bg-white dark:bg-neo-darker border-3 border-black dark:border-gray-700 p-4 shadow-neo" style="border-width: 3px;">
            <p class="font-display font-black text-2xl text-neo-pink">12</p>
            <p class="text-xs font-mono text-gray-500 dark:text-gray-400 mt-1">Modules</p>
          </div>
          <div class="bg-white dark:bg-neo-darker border-3 border-black dark:border-gray-700 p-4 shadow-neo" style="border-width: 3px;">
            <p class="font-display font-black text-2xl text-neo-green">100+</p>
            <p class="text-xs font-mono text-gray-500 dark:text-gray-400 mt-1">Pages Doc</p>
          </div>
          <div class="bg-white dark:bg-neo-darker border-3 border-black dark:border-gray-700 p-4 shadow-neo" style="border-width: 3px;">
            <p class="font-display font-black text-2xl text-neo-orange">PWA</p>
            <p class="text-xs font-mono text-gray-500 dark:text-gray-400 mt-1">Mobile Ready</p>
          </div>
        </div>
      </div>
    </header>

    <!-- Quick Access Cards -->
    <section class="max-w-4xl mx-auto px-6 py-12">
      <h2 class="font-display font-bold text-2xl mb-6 text-black dark:text-white">Acces rapide</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-neo-yellow/10 dark:bg-neo-yellow/5 border-3 border-black dark:border-gray-700 p-5 shadow-neo hover:shadow-neo-hover hover:-translate-y-1 active:translate-y-0 transition-all cursor-pointer" style="border-width: 3px;" onclick="document.getElementById('content').querySelector('h2')?.scrollIntoView({behavior:'smooth'})">
          <p class="font-display font-bold text-lg mb-1">Identifiants</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">admin@aemi.cd / aemi2026</p>
          <p class="text-xs font-mono text-neo-blue mt-2">Section 3 &rarr;</p>
        </div>
        <div class="bg-neo-blue/10 dark:bg-neo-blue/5 border-3 border-black dark:border-gray-700 p-5 shadow-neo hover:shadow-neo-hover hover:-translate-y-1 active:translate-y-0 transition-all cursor-pointer" style="border-width: 3px;" onclick="scrollToSection('installation')">
          <p class="font-display font-bold text-lg mb-1">Installation</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">Android, iPhone, Desktop</p>
          <p class="text-xs font-mono text-neo-pink mt-2">Section 2 &rarr;</p>
        </div>
        <div class="bg-neo-pink/10 dark:bg-neo-pink/5 border-3 border-black dark:border-gray-700 p-5 shadow-neo hover:shadow-neo-hover hover:-translate-y-1 active:translate-y-0 transition-all cursor-pointer" style="border-width: 3px;" onclick="scrollToSection('technicien')">
          <p class="font-display font-bold text-lg mb-1">Vue Technicien</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">L'experience mobile complete</p>
          <p class="text-xs font-mono text-neo-green mt-2">Section 17 &rarr;</p>
        </div>
      </div>
    </section>

    <!-- Content -->
    <article id="content" class="max-w-4xl mx-auto px-6 pb-24">
      <div class="flex items-center justify-center py-20">
        <div class="animate-pulse flex flex-col items-center gap-4">
          <div class="w-12 h-12 border-4 border-neo-yellow border-t-transparent rounded-full animate-spin"></div>
          <p class="font-mono text-sm text-gray-400">Chargement du document...</p>
        </div>
      </div>
    </article>

    <!-- Footer -->
    <footer class="border-t-4 border-black dark:border-gray-700 bg-black dark:bg-neo-darker text-white">
      <div class="max-w-4xl mx-auto px-6 py-12">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
          <div>
            <p class="font-display font-bold text-xl">AEMI GMAO <span class="text-neo-yellow">v1.0</span></p>
            <p class="text-gray-400 text-sm mt-1">Developpe par <span class="text-neo-pink font-semibold">ExplorIA</span> &middot; Fevrier 2026</p>
          </div>
          <div class="flex gap-3">
            <a href="https://aemi-gmao.vercel.app" target="_blank" class="bg-neo-yellow text-black font-display font-bold px-5 py-2.5 border-2 border-neo-yellow hover:bg-neo-yellow/90 transition-colors text-sm">
              App
            </a>
            <a href="https://github.com/fortbaptiste/aemi-forrestgroupe" target="_blank" class="bg-transparent text-white font-display font-bold px-5 py-2.5 border-2 border-white/30 hover:border-white transition-colors text-sm">
              GitHub
            </a>
          </div>
        </div>
        <div class="border-t border-white/10 mt-8 pt-8 text-center">
          <p class="text-gray-500 text-xs font-mono">Document de presentation &middot; 52 000+ mots &middot; Tous droits reserves</p>
        </div>
      </div>
    </footer>
  </main>

  <!-- Back to Top -->
  <button id="back-to-top" onclick="window.scrollTo({top:0,behavior:'smooth'})" class="fixed bottom-6 right-6 z-50 bg-black dark:bg-neo-blue text-white p-3 border-3 border-black shadow-neo hover:shadow-neo-hover active:translate-x-[2px] active:translate-y-[2px] transition-all opacity-0 pointer-events-none" style="border-width: 3px;">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 15l7-7 7 7"/></svg>
  </button>

  <!-- Easter Egg -->
  <div id="easter-egg">Vous avez trouve l'easter egg ! ðŸŽ‰</div>

  <script>
    // ======================== SIDEBAR ========================
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      const menuIcon = document.getElementById('menu-icon');
      const closeIcon = document.getElementById('close-icon');
      const isOpen = !sidebar.classList.contains('closed');

      if (isOpen) {
        sidebar.classList.add('closed');
        overlay.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
      } else {
        sidebar.classList.remove('closed');
        overlay.classList.remove('hidden');
        menuIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
      }
    }

    // Close sidebar on mobile when clicking a link
    document.getElementById('sidebar-nav').addEventListener('click', (e) => {
      if (e.target.closest('a') && window.innerWidth < 1024) {
        toggleSidebar();
      }
    });

    // ======================== DARK MODE ========================
    function toggleDark() {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('dark', document.documentElement.classList.contains('dark'));
    }
    if (localStorage.getItem('dark') === 'true' || (!localStorage.getItem('dark') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }

    // ======================== PROGRESS BAR ========================
    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const progress = (scrollTop / docHeight) * 100;
      document.getElementById('progress-bar').style.width = progress + '%';

      // Back to top button
      const btn = document.getElementById('back-to-top');
      if (scrollTop > 500) {
        btn.style.opacity = '1';
        btn.style.pointerEvents = 'auto';
      } else {
        btn.style.opacity = '0';
        btn.style.pointerEvents = 'none';
      }
    });

    // ======================== REVEAL ANIMATIONS ========================
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    // ======================== LOAD CONTENT ========================
    async function loadContent() {
      try {
        const response = await fetch('content.md');
        if (!response.ok) throw new Error('Failed to load');
        const markdown = await response.text();

        // Configure marked
        marked.setOptions({
          breaks: true,
          gfm: true,
        });

        const html = marked.parse(markdown);
        document.getElementById('content').innerHTML = html;

        // Build TOC from h2 elements
        buildTOC();

        // Add reveal animations to sections
        document.querySelectorAll('#content h2, #content h3, #content table, #content blockquote').forEach(el => {
          el.classList.add('reveal');
          observer.observe(el);
        });

        // Add IDs to headings for navigation
        let counter = 0;
        document.querySelectorAll('#content h1, #content h2, #content h3, #content h4').forEach(heading => {
          if (!heading.id) {
            heading.id = 'heading-' + counter++;
          }
        });

        // Observe active section
        observeActiveSections();

      } catch (err) {
        document.getElementById('content').innerHTML = `
          <div class="text-center py-20">
            <p class="text-2xl font-display font-bold text-red-500 mb-4">Erreur de chargement</p>
            <p class="text-gray-500">Le document n'a pas pu etre charge. <a href="content.md" class="text-neo-blue underline">Voir le fichier brut</a></p>
          </div>`;
      }
    }

    function buildTOC() {
      const headings = document.querySelectorAll('#content h1, #content h2');
      const container = document.getElementById('toc-container');
      let html = '';
      let counter = 0;

      headings.forEach(heading => {
        const id = 'section-' + counter++;
        heading.id = id;
        const isH1 = heading.tagName === 'H1';
        const text = heading.textContent.replace(/^#+\s*/, '').substring(0, 45);
        const truncated = text.length >= 45 ? text + '...' : text;

        if (isH1) {
          html += `<a href="#${id}" class="toc-link nav-link block px-3 py-2 text-xs font-bold font-display text-gray-900 dark:text-gray-100 hover:bg-neo-yellow/30 dark:hover:bg-neo-blue/20 rounded transition-all truncate" data-section="${id}">${truncated}</a>`;
        } else {
          html += `<a href="#${id}" class="toc-link nav-link block px-3 py-1.5 text-xs text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-all truncate ml-2" data-section="${id}">${truncated}</a>`;
        }
      });

      container.innerHTML = html;
    }

    function observeActiveSections() {
      const headings = document.querySelectorAll('#content h1, #content h2');
      const navLinks = document.querySelectorAll('.nav-link');

      const sectionObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navLinks.forEach(link => link.classList.remove('active'));
            const activeLink = document.querySelector(`.nav-link[data-section="${entry.target.id}"]`);
            if (activeLink) {
              activeLink.classList.add('active');
              activeLink.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
            }
          }
        });
      }, { rootMargin: '-80px 0px -70% 0px' });

      headings.forEach(h => sectionObserver.observe(h));
    }

    function scrollToSection(keyword) {
      const headings = document.querySelectorAll('#content h1, #content h2, #content h3');
      for (const h of headings) {
        if (h.textContent.toLowerCase().includes(keyword.toLowerCase())) {
          h.scrollIntoView({ behavior: 'smooth' });
          return;
        }
      }
    }

    // ======================== EASTER EGG (Konami Code) ========================
    let konamiState = 0;
    const konamiCode = [38,38,40,40,37,39,37,39,66,65];
    document.addEventListener('keydown', (e) => {
      if (e.keyCode === konamiCode[konamiState]) {
        konamiState++;
        if (konamiState === konamiCode.length) {
          const egg = document.getElementById('easter-egg');
          egg.style.display = 'block';
          setTimeout(() => egg.style.display = 'none', 3000);
          konamiState = 0;
          document.body.style.transition = 'filter 1s';
          document.body.style.filter = 'hue-rotate(90deg)';
          setTimeout(() => document.body.style.filter = '', 2000);
        }
      } else {
        konamiState = 0;
      }
    });

    // ======================== INIT ========================
    loadContent();
  </script>
</body>
</html>
